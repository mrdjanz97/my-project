var g=(t=>(t.Local="local",t.Sync="sync",t.Managed="managed",t.Session="session",t))(g||{});function w(t,h,r){let s=null,o=[];const n=(r==null?void 0:r.storageType)??"local",a=async()=>{if(chrome.storage[n]===void 0)throw new Error(`Check your storage permission into manifest.json: ${n} is not defined`);return(await chrome.storage[n].get([t]))[t]??h},c=()=>{o.forEach(e=>e())},l=async e=>{typeof e=="function"?e.hasOwnProperty("then")?s=await e(s):s=e(s):s=e,await chrome.storage[n].set({[t]:s}),c()},m=e=>(o=[...o,e],()=>{o=o.filter(f=>f!==e)}),u=()=>s;return a().then(e=>{s=e,c()}),{get:a,set:l,getSnapshot:u,subscribe:m}}const i=w("theme-storage-key","light",{storageType:g.Local}),y={...i,toggle:()=>{i.set(t=>t==="light"?"dark":"light")}};export{y as e};
//# sourceMappingURL=exampleThemeStorage.mvPT3a0L.js.map
